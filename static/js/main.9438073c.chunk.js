(this.webpackJsonpthef2e_bike=this.webpackJsonpthef2e_bike||[]).push([[0],{13:function(n,t,e){n.exports={container:"Road_container__1CbJq",header:"Road_header__c1kgL",station:"Road_station__16GtC",location:"Road_location__3MEFE"}},36:function(n,t,e){n.exports={container:"Map_container__3xh_q"}},37:function(n,t,e){n.exports={container:"Maps_container__2xZWn"}},39:function(n,t,e){n.exports={container:"MapRoute_container__3Bsze"}},46:function(n,t,e){},7:function(n,t,e){n.exports={container:"RoadList_container__e5diS",close:"RoadList_close__wnnqw",container_open:"RoadList_container_open__3IAAI",container_close:"RoadList_container_close__2aQ4t",wrapper:"RoadList_wrapper__2yFXH",menu:"RoadList_menu__3_fJT",menu_list:"RoadList_menu_list__2Gm_s",roadContainer:"RoadList_roadContainer__2rnqt"}},73:function(n,t,e){"use strict";e.r(t);var a=e(0),o=e.n(a),i=e(17),c=e.n(i),r=(e(46),e(12)),s=e.n(r),u=e(18),l=e(6),p=e(19),d=e.n(p),h=e(40);function j(){var n=(new Date).toGMTString(),t=new h.a("SHA-1","TEXT");return t.setHMACKey("0o53fh7JHKpoZBW2kIM8SM7GW4Y","TEXT"),t.update("x-date: "+n),{Authorization:'hmac username="83fc39f9c29946578ee26c17b458f970", algorithm="hmac-sha1", headers="x-date", signature="'+t.getHMAC("B64")+'"',"X-Date":n}}function _(){return(_=Object(u.a)(s.a.mark((function n(t){var e;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d.a.defaults.baseURL="https://ptx.transportdata.tw/MOTC",d.a.defaults.headers=j(),n.next=5,d.a.get(t);case 5:if(200!==(e=n.sent).status){n.next=8;break}return n.abrupt("return",e.data);case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:return n.abrupt("return",null);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))).apply(this,arguments)}var b=function(n){return _.apply(this,arguments)},m=e(8),O=e.n(m),f=(e(21),e(3)),y=e.n(f),g=(e(36),e(33),e(34),e(35),e(1));var x=e(37),v=e.n(x),C=e(4),S=function(n){var t=n.bikeAvailable,e=n.bikeStations,o=n.select,i=t,c=e,r=Object(C.c)((function(n){return n.stationOrRoad})),s=Object(C.c)((function(n){return n.roadSelect})),u=Object(a.useRef)();return Object(a.useEffect)((function(){var n=null;if("station"===r){if(null===c||0===c.length)return null;n=y.a.map(u.current,{center:[c[0].StationPosition.PositionLat,c[0].StationPosition.PositionLon],zoom:16});y.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(n);var t=new y.a.Icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),e=y.a.markerClusterGroup();c.map((function(n,e){return y.a.marker([n.StationPosition.PositionLat,n.StationPosition.PositionLon],{icon:t}).bindPopup("<div> \n\t\t\t<h1>".concat(n.StationName.Zh_tw,"</h1>\n\t\t\t<p>").concat(n.StationAddress.Zh_tw,"</p>\n\t\t\t<p>\u53ef\u79df\u501f\u6578\u91cf").concat(i[e].AvailableRentBikes,"</p>\n\t\t\t<p>\u53ef\u6b78\u9084\u6578\u91cf").concat(i[e].AvailableReturnBikes,"</p>\n\t\t\t</div>\n\t\t\t"))})).forEach((function(n){return e.addLayer(n)})),n.addLayer(e)}else{var a=s.Geometry.replace("MULTILINESTRING ","").replace("((","").replace("))","").trim().split(",").map((function(n){var t=n.split(" "),e=[];return e.push(Number(t[1])),e.push(Number(t[0])),e}));n=y.a.map(u.current,{center:[a[0][0],a[0][1]],zoom:16});y.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(n);t=new y.a.Icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});y.a.marker([a[0][0],a[0][1]],{icon:t}).addTo(n).bindPopup("<h1>Start</h1>").openPopup(),y.a.marker([a[a.length-1][0],a[a.length-1][1]],{icon:t}).addTo(n).bindPopup("<h1>End</h1>").openPopup();var o=a,l=y.a.polyline(o,{color:"red"}).addTo(n);n.fitBounds(l.getBounds())}return function(){return n.remove()}}),[c,o]),Object(g.jsx)("div",{className:v.a.container,ref:function(n){return u.current=n}})},w=(e(39),e(9)),N=e.n(w),T="\u81fa\u5317\u5e02:Taipei\n\u65b0\u5317\u5e02:NewTaipei\n\u6843\u5712\u5e02:Taoyuan\n\u81fa\u4e2d\u5e02:Taichung\n\u81fa\u5357\u5e02:Tainan\n\u9ad8\u96c4\u5e02:Kaohsiung\n\u57fa\u9686\u5e02:Keelung\n\u65b0\u7af9\u5e02:Hsinchu\n\u65b0\u7af9\u7e23:HsinchuCounty\n\u82d7\u6817\u7e23:MiaoliCounty\n\u5f70\u5316\u7e23:ChanghuaCounty\n\u5357\u6295\u7e23:NantouCounty\n\u96f2\u6797\u7e23:YunlinCounty\n\u5609\u7fa9\u7e23:ChiayiCounty\n\u5609\u7fa9\u5e02:Chiayi\n\u5c4f\u6771\u7e23:PingtungCounty\n\u5b9c\u862d\u7e23:YilanCounty\n\u82b1\u84ee\u7e23:HualienCounty\n\u81fa\u6771\u7e23:TaitungCounty\n\u91d1\u9580\u7e23:KinmenCounty\n\u6f8e\u6e56\u7e23:PenghuCounty\n\u9023\u6c5f\u7e23:LienchiangCounty".split(/\r?\n/),k="\u81fa\u4e2d\u5e02:Taichung\n\u65b0\u7af9\u5e02:Hsinchu\n\u82d7\u6817\u7e23:MiaoliCounty\n\u65b0\u5317\u5e02:NewTaipei\n\u5c4f\u6771\u7e23:PingtungCounty\n\u91d1\u9580\u7e23:KinmenCounty\n\u6843\u5712\u5e02:Taoyuan\n\u81fa\u5317\u5e02:Taipei\n\u9ad8\u96c4\u5e02:Kaohsiung\n\u81fa\u5357\u5e02:Tainan\n\u5609\u7fa9\u5e02:Chiayi".split(/\r?\n/),R="\u81fa\u4e2d\u5e02:Taichung\n\u57fa\u9686\u5e02:Keelung\n\u65b0\u7af9\u7e23:HsinchuCounty\n\u82d7\u6817\u7e23:MiaoliCounty\n\u5f70\u5316\u7e23:ChanghuaCounty\n\u65b0\u5317\u5e02:NewTaipei\n\u5357\u6295\u7e23:NantouCounty\n\u96f2\u6797\u7e23:YunlinCounty\n\u5609\u7fa9\u7e23:ChiayiCounty\n\u5609\u7fa9\u5e02:Chiayi\n\u5c4f\u6771\u7e23:PingtungCounty\n\u5b9c\u862d\u7e23:YilanCounty\n\u82b1\u84ee\u7e23:HualienCounty\n\u81fa\u6771\u7e23:TaitungCounty\n\u91d1\u9580\u7e23:KinmenCounty\n\u6f8e\u6e56\u7e23:PenghuCounty\n\u6843\u5712\u5e02:Taoyuan\n\u81fa\u5317\u5e02:Taipei\n\u9ad8\u96c4\u5e02:Kaohsiung\n\u81fa\u5357\u5e02:Tainan".split(/\r?\n/),A=(T.map((function(n,t){return n.split(":")})),k.map((function(n,t){return n.split(":")}))),L=R.map((function(n){return n.split(":")})),P=e(10),M=e(11),E=function(n){var t=A.map((function(n,t){return Object(g.jsx)("option",{value:n[1],children:n[0]},t)})),e=L.map((function(n,t){return Object(g.jsx)("option",{value:n[1],children:n[0]},t)})),a=Object(C.b)();return Object(g.jsxs)("div",{className:N.a.container+" "+n.style,children:[Object(g.jsxs)("div",{className:N.a.logo,children:[Object(g.jsx)(P.a,{className:N.a.icon,icon:M.b}),Object(g.jsx)("p",{children:"Go Bike"})]}),Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:N.a.selectContainer,children:[Object(g.jsxs)("div",{className:N.a.items,children:[Object(g.jsx)("p",{children:"\u79df\u8eca\u9084\u8eca\u7ad9\u9ede\uff1a"}),Object(g.jsxs)("select",{onChange:function(n){a({type:"PlaceSelect",payload:{place:n.target.value}})},children:[Object(g.jsx)("option",{disabled:!0,selected:!0,value:!0,children:"\u8acb\u9078\u64c7\u7ad9\u9ede"}),t]})]}),Object(g.jsxs)("div",{className:N.a.items,children:[Object(g.jsx)("p",{children:"\u81ea\u884c\u8eca\u9053\uff1a"}),Object(g.jsxs)("select",{onChange:function(n){a({type:"RoadPlace",payload:{road:n.target.value}})},children:[Object(g.jsx)("option",{disabled:!0,selected:!0,value:!0,children:"\u8acb\u9078\u64c7\u8eca\u9053"}),e]})]})]})})]})},H=e(7),I=e.n(H),z=e(13),B=e.n(z),K=function(n){var t=n.data,e=Object(C.b)();return Object(g.jsxs)("div",{className:B.a.container,onClick:function(){e({type:"RoadSelect",payload:{roadSelect:t}})},children:[Object(g.jsx)("p",{className:B.a.header,children:t.RouteName}),Object(g.jsx)(a.Fragment,{children:t.Direction?Object(g.jsxs)("p",{children:["\u65b9\u5411\uff1a",t.Direction]}):null}),Object(g.jsxs)("div",{className:B.a.station,children:[Object(g.jsx)("p",{children:"\u8d77"}),Object(g.jsx)("p",{children:t.RoadSectionStart})]}),Object(g.jsxs)("div",{className:B.a.station,children:[Object(g.jsx)("p",{children:"\u8fc4"}),Object(g.jsx)("p",{children:t.RoadSectionEnd})]}),Object(g.jsxs)("div",{className:B.a.location,children:[Object(g.jsxs)("p",{children:["\u7e3d\u9577\uff1a",t.CyclingLength/1e3,"KM"]}),Object(g.jsxs)("div",{children:[Object(g.jsx)(P.a,{icon:M.c}),Object(g.jsxs)("p",{children:[t.City," ",t.Town]})]})]})]})};var D=function(n){n.props;var t=Object(a.useState)(!1),e=Object(l.a)(t,2),o=e[0],i=e[1],c=Object(a.useState)(I.a.container_close),r=Object(l.a)(c,2),s=r[0],u=r[1],p=Object(a.useState)([]),d=Object(l.a)(p,2),h=d[0],j=d[1],_=Object(C.c)((function(n){return n.road}));return Object(a.useEffect)((function(){b("/v2/Cycling/Shape/".concat(_,"?format=JSON")).then((function(n){var t=n.map((function(n,t){return Object(g.jsx)(K,{data:n},t)}));j(t)}))}),[_]),Object(g.jsx)("div",{className:I.a.container+" "+s,children:Object(g.jsxs)("div",{className:I.a.wrapper,children:[Object(g.jsx)("button",{className:I.a.menu,onClick:function(){o?(u(I.a.container_close),i(!1)):(u(I.a.container_open),i(!0))},children:Object(g.jsx)(P.a,{icon:M.a})}),Object(g.jsx)("div",{className:I.a.menu_list,children:Object(g.jsx)("div",{className:I.a.roadContainer,children:h})})]})})};var J=function(){var n=Object(a.useState)([]),t=Object(l.a)(n,2),e=t[0],o=t[1],i=Object(a.useState)([]),c=Object(l.a)(i,2),r=c[0],p=c[1],d=Object(C.c)((function(n){return n.place})),h=Object(C.c)((function(n){return n.roadSelect})),j=Object(C.c)((function(n){return n.stationOrRoad})),_=Object(a.useState)(null),m=Object(l.a)(_,2),f=(m[0],m[1]),y=Object(a.useState)(null),x=Object(l.a)(y,2),v=(x[0],x[1]),w=Object(a.useState)(null),N=Object(l.a)(w,2),T=N[0],k=N[1];return Object(a.useEffect)((function(){if("station"===j){f(O.a.station_dispaly),v(O.a.road_not_display);var n=null,t=null;function e(){return a.apply(this,arguments)}function a(){return(a=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/v2/Bike/Station/".concat(d,"?$format=JSON")).then((function(t){n=t}));case 2:return e.next=4,b("v2/Bike/Availability/".concat(d,"?$format=JSON")).then((function(n){t=n}));case 4:n&&n.length===t.length&&(p(t),o(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e()}else f(O.a.station_not_display),v(O.a.road_display),k(h)}),[d,h]),Object(g.jsxs)("div",{className:O.a.container,children:[Object(g.jsx)(E,{style:O.a.header}),Object(g.jsx)(S,{bikeAvailable:r,bikeStations:e,select:T}),Object(g.jsx)(D,{})]})},G=e(41),Z={place:"NewTaipei",road:"NewTaipei",roadSelect:null,stationOrRoad:"station"},U=Object(G.a)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PlaceSelect":var e=Object.assign({},n);return e.place=t.payload.place,e.stationOrRoad="station",e;case"RoadPlace":var a=Object.assign({},n);return a.road=t.payload.road,a.stationOrRoad="road",a;case"RoadSelect":var o=Object.assign({},n);return o.roadSelect=t.payload.roadSelect,o.stationOrRoad="road",o;case"ADD_ITEM":var i=n.menuItemData.slice();return{menuItemData:[t.payload.itemNew].concat(i)};case"CLEAN_ITEM":return{menuItemData:[]};default:return n}}));c.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(C.a,{store:U,children:Object(g.jsx)(J,{})})}),document.getElementById("root"))},8:function(n,t,e){n.exports={container:"App_container__1MQN3",header:"App_header__3ZZ1n",map:"App_map__3Febj",station_dispaly:"App_station_dispaly__3mN6X",station_not_display:"App_station_not_display__7uWut",road_display:"App_road_display__BE9Ql",road_not_display:"App_road_not_display__u4QZm"}},9:function(n,t,e){n.exports={container:"Header_container__1VC87",logo:"Header_logo__3_SJs",icon:"Header_icon__2vvCF",selectContainer:"Header_selectContainer__Irzeo",items:"Header_items__2Dz-W"}}},[[73,1,2]]]);
//# sourceMappingURL=main.9438073c.chunk.js.map