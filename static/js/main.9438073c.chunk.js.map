{"version":3,"sources":["components/Road/Road.module.css","components/Map/Map.module.css","components/Maps/Maps.module.css","components/MapRoute/MapRoute.module.css","components/RoadList/RoadList.module.css","api/dataFetch.js","components/Map/Map.js","components/Maps/Maps.js","data/places.js","components/Header/Header.js","components/Road/Road.js","components/RoadList/RoadList.js","App.js","model/reducer.js","model/store.js","index.js","App.module.css","components/Header/Header.module.css"],"names":["module","exports","getAuthorizationHeader","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","Authorization","getHMAC","query","a","axios","defaults","baseURL","headers","get","res","status","data","console","log","getData","Map","Maps","bikeAvailable","bikeStations","select","available","stations","stationOrRoad","useSelector","state","routeSelect","roadSelect","mapContainer","useRef","useEffect","map","length","L","current","center","StationPosition","PositionLat","PositionLon","zoom","tileLayer","attribution","addTo","greenIcon","Icon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","markers","markerClusterGroup","item","idx","marker","icon","bindPopup","StationName","Zh_tw","StationAddress","AvailableRentBikes","AvailableReturnBikes","forEach","addLayer","path","Geometry","replace","trim","split","i","arr","push","Number","openPopup","latlngs","polyline","color","fitBounds","getBounds","remove","className","style","container","ref","el","places","roads","bikeRoads","Header","props","stationsOptions","value","roadOptions","dispatch","useDispatch","logo","faBiking","selectContainer","items","onChange","e","type","payload","place","target","disabled","selected","road","Road","onClick","header","RouteName","Direction","station","RoadSectionStart","RoadSectionEnd","location","CyclingLength","faMapMarkerAlt","City","Town","RoadList","useState","isOpen","setIsOpen","container_close","display","setDisplay","roadList","setRoadList","placeData","then","wrapper","menu","container_open","faBars","menu_list","roadContainer","App","setBikeStations","setBikeAvailable","routeData","setStationDisplay","setRoadDisplay","routeDatas","setRouteDatas","station_dispaly","road_not_display","stationData","bikeAvailableData","fetchData","station_not_display","road_display","initState","itemStore","createStore","action","Object","assign","menuItemCopy","menuItemData","slice","itemNew","concat","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.9438073c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Road_container__1CbJq\",\"header\":\"Road_header__c1kgL\",\"station\":\"Road_station__16GtC\",\"location\":\"Road_location__3MEFE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Map_container__3xh_q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Maps_container__2xZWn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MapRoute_container__3Bsze\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RoadList_container__e5diS\",\"close\":\"RoadList_close__wnnqw\",\"container_open\":\"RoadList_container_open__3IAAI\",\"container_close\":\"RoadList_container_close__2aQ4t\",\"wrapper\":\"RoadList_wrapper__2yFXH\",\"menu\":\"RoadList_menu__3_fJT\",\"menu_list\":\"RoadList_menu_list__2Gm_s\",\"roadContainer\":\"RoadList_roadContainer__2rnqt\"};","import axios from 'axios'\nimport jsSHA from 'jssha'\n\nfunction getAuthorizationHeader() {\n  //  填入自己 ID、KEY 開始\n  let AppID = \"83fc39f9c29946578ee26c17b458f970\";\n  let AppKey = \"0o53fh7JHKpoZBW2kIM8SM7GW4Y\";\n  //  填入自己 ID、KEY 結束\n  let GMTString = new Date().toGMTString();\n  let ShaObj = new jsSHA(\"SHA-1\", \"TEXT\");\n  ShaObj.setHMACKey(AppKey, \"TEXT\");\n  ShaObj.update(\"x-date: \" + GMTString);\n  let HMAC = ShaObj.getHMAC(\"B64\");\n  let Authorization =\n    'hmac username=\"' +\n    AppID +\n    '\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"' +\n    HMAC +\n    '\"';\n  return { Authorization: Authorization, \"X-Date\": GMTString };\n}\n\nasync function getData(query) {\n\ttry {\n\t\taxios.defaults.baseURL = 'https://ptx.transportdata.tw/MOTC'\n\t\taxios.defaults.headers = getAuthorizationHeader();\n\t\tlet res = await axios.get(query) \n\t\tif (res.status === 200) {\n\t\t\treturn res.data\n\t\t}\n\t}\n\tcatch (err) {\n\t\tconsole.log(err);\n\t}\n\n\treturn null;\n}\n\nexport default getData;","import \"leaflet/dist/leaflet.css\"\nimport L from \"leaflet\"\nimport { useEffect, useRef } from 'react'\nimport style from './Map.module.css'\n// 引入 leaflet.markercluster\nimport \"leaflet.markercluster/dist/MarkerCluster.css\"\nimport \"leaflet.markercluster/dist/MarkerCluster.Default.css\"\nimport \"leaflet.markercluster\";\n\n\nfunction Map(props) {\n\tconst available = props.bikeAvailable\n\tconst stations = props.bikeStations;\n\tconst mapContainer = useRef();\n\n\n\tuseEffect(() => {\n\t\tif (stations === null || stations.length === 0) return null;\n\t\tconst map = L.map(mapContainer.current, {\n\t\t\tcenter: [stations[0].StationPosition.PositionLat, stations[0].StationPosition.PositionLon], \n\t\t\tzoom: 16 \n\t\t}); \n\t\t\n\t\tconst osmUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"; \n\t\tL.tileLayer(osmUrl, { \n\t\t\tattribution: \n\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors', \n\t\t}).addTo(map); \n\t\t\n\t\tvar greenIcon = new L.Icon({ \n\t\t\ticonUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n\t\t\tshadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n\t\t\ticonSize: [25, 41], \n\t\t\ticonAnchor: [12, 41],\n\t\t\tpopupAnchor: [1, -34],\n\t\t\tshadowSize: [41, 41] \n\t\t}); \n\t\t\n\t\tvar markers = L.markerClusterGroup();\n\n\t\tstations.map((item, idx) => L.marker([item.StationPosition.PositionLat, item.StationPosition.PositionLon], {icon: greenIcon})\n\t\t.bindPopup(\n\t\t\t`<div> \n\t\t\t<h1>${item.StationName.Zh_tw}</h1>\n\t\t\t<p>${item.StationAddress.Zh_tw}</p>\n\t\t\t<p>可租借數量${available[idx].AvailableRentBikes}</p>\n\t\t\t<p>可歸還數量${available[idx].AvailableReturnBikes }</p>\n\t\t\t</div>\n\t\t\t`\n\t\t\t))\n\t\t.forEach(item => markers.addLayer(item))\n\n\t\tmap.addLayer(markers)\n\n\t\t           \n\n\n\n\t\t// unmount map function \n\t\treturn ()=> map.remove(); \n\t}, [stations]);\n\n\treturn (\n\t\t <div className={style.container} \n\t\t ref={el => mapContainer.current = el}> \n\t\t </div>\n\t)\n}\n// \tif (Object.keys(props.data).length !== 0) { \n// \t\tconsole.log('in')\n// \t\tlet map = L.map('map', { \n// \t\t\tcenter: [data[0].StationPosition.PositionLat, data[0].StationPosition.PositionLon], \n// \t\t\tzoom: 16 \n// \t\t});\n\n// \tconst osmUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"; \n// \tL.tileLayer(osmUrl, { \n// \t\tattribution: \n// \t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors', \n// \t}).addTo(map);\n\n// \tvar greenIcon = new L.Icon({\n//   iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n//   shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n//   iconSize: [25, 41],\n//   iconAnchor: [12, 41],\n//   popupAnchor: [1, -34],\n//   shadowSize: [41, 41]\n// });\n\n// \tdata.forEach(item => {\n// \t\tL.marker([item.StationPosition.PositionLat, item.StationPosition.PositionLon], {icon: greenIcon}).addTo(map)\n// \t\t.bindPopup(`<h1>${item.StationPosition.Zh_tw}</h1>`)\n// \t})\n// }\n// useEffect(() => { \n\t// \tlet map = L.map('map', {\n\t// \t\tcenter: [pos, lon],\n\t// \t\tzoom: 16,\n\t// \t});\n\n\t// \tconst osmUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\n\t// \t L.tileLayer(osmUrl, {\n  //       attribution:\n  //         '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  //     }).addTo(map);\n\n\t// \t\tL.marker([pos, lon], {\n\t// \t\t\ticon: L.icon({\n\t// \t\t\t\t iconUrl: \"/location.png\", \n\t// \t\t\t\t iconSize: [30, 30],\n\t// \t\t\t}),\n\t// \t\t}).addTo(map);\n\n\t// \treturn () => {map.remove()}\n\t// }, [pos, lon])\n\n\nexport default Map;","import \"leaflet/dist/leaflet.css\"\nimport L from \"leaflet\"\nimport { useEffect, useRef } from 'react'\nimport style from './Maps.module.css'\n// 引入 leaflet.markercluster\nimport \"leaflet.markercluster/dist/MarkerCluster.css\"\nimport \"leaflet.markercluster/dist/MarkerCluster.Default.css\"\nimport \"leaflet.markercluster\";\nimport { useSelector } from \"react-redux\"\n\n\nconst Maps = ({ bikeAvailable, bikeStations, select }) => {\n\tconst available = bikeAvailable\n\tconst stations = bikeStations;\n\tconst sel = select;\n\tconst stationOrRoad = useSelector(state => state.stationOrRoad);\n\tconst routeSelect = useSelector(state => state.roadSelect);\n\tconst mapContainer = useRef();\n\n\tuseEffect(() => { \n\t\tlet map = null;\n\t\tif (stationOrRoad === \"station\") {\n\t\t\tif (stations === null || stations.length === 0) return null;\n\t\t\tmap = L.map(mapContainer.current, {\n\t\t\t\tcenter: [stations[0].StationPosition.PositionLat, stations[0].StationPosition.PositionLon],\n\t\t\t\tzoom: 16\n\t\t\t});\n\n\t\t\tconst osmUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\n\t\t\tL.tileLayer(osmUrl, {\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\t\t\t}).addTo(map);\n\n\t\t\tvar greenIcon = new L.Icon({\n\t\t\t\ticonUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n\t\t\t\tshadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n\t\t\t\ticonSize: [25, 41],\n\t\t\t\ticonAnchor: [12, 41],\n\t\t\t\tpopupAnchor: [1, -34],\n\t\t\t\tshadowSize: [41, 41]\n\t\t\t});\n\n\t\t\tvar markers = L.markerClusterGroup();\n\n\t\t\tstations.map((item, idx) => L.marker([item.StationPosition.PositionLat, item.StationPosition.PositionLon], { icon: greenIcon })\n\t\t\t\t.bindPopup(\n\t\t\t\t\t`<div> \n\t\t\t<h1>${item.StationName.Zh_tw}</h1>\n\t\t\t<p>${item.StationAddress.Zh_tw}</p>\n\t\t\t<p>可租借數量${available[idx].AvailableRentBikes}</p>\n\t\t\t<p>可歸還數量${available[idx].AvailableReturnBikes}</p>\n\t\t\t</div>\n\t\t\t`\n\t\t\t\t))\n\t\t\t\t.forEach(item => markers.addLayer(item))\n\n\t\t\tmap.addLayer(markers)\n\t\t} else {\n\t\t\tconst routes = routeSelect.Geometry.replace(\"MULTILINESTRING \", '').replace('((', '').replace('))', '').trim();\n\n\t\t\tconst path = routes.split(',').map(i => {\n\t\t\t\tlet data = i.split(' ')\n\t\t\t\tlet arr = []\n\t\t\t\tarr.push(Number(data[1]))\n\t\t\t\tarr.push(Number(data[0]))\n\t\t\t\treturn arr;\n\t\t\t})\n\n\t\t\tmap = L.map(mapContainer.current, {\n\t\t\t\tcenter: [path[0][0], path[0][1]],\n\t\t\t\tzoom: 16\n\t\t\t});\n\n\t\t\tconst osmUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\n\n\t\t\tL.tileLayer(osmUrl, {\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\t\t\t}).addTo(map);\n\n\t\t\tvar greenIcon = new L.Icon({\n\t\t\t\ticonUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n\t\t\t\tshadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n\t\t\t\ticonSize: [25, 41],\n\t\t\t\ticonAnchor: [12, 41],\n\t\t\t\tpopupAnchor: [1, -34],\n\t\t\t\tshadowSize: [41, 41]\n\t\t\t});\n\n\t\t\tL.marker([path[0][0], path[0][1]], { icon: greenIcon }).addTo(map)\n\t\t\t\t.bindPopup('<h1>Start</h1>')\n\t\t\t\t.openPopup();\n\n\t\t\tL.marker([path[path.length - 1][0], path[path.length - 1][1]], { icon: greenIcon }).addTo(map)\n\t\t\t\t.bindPopup('<h1>End</h1>')\n\t\t\t\t.openPopup();\n\n\t\t\t//From documentation http://leafletjs.com/reference.html#polyline \n\t\t\t// create a red polyline from an arrays of LatLng points \n\t\t\tvar latlngs = path;\n\t\t\tvar polyline = L.polyline(latlngs, {\n\t\t\t\tcolor: 'red'\n\t\t\t}).addTo(map);\n\n\t\t\t// // zoom the map to the polyline \n\t\t\tmap.fitBounds(polyline.getBounds());\n\t\t}\n\n\t\t// unmount map function \n\t\treturn () => map.remove();\n\t}, [stations, select]);\n\n\treturn (\n\t\t<div className={style.container}\n\t\t\tref={el => mapContainer.current = el}>\n\t\t</div>\n\t)\n}\n\nexport default Maps;","const placeName = `臺北市:Taipei\n新北市:NewTaipei\n桃園市:Taoyuan\n臺中市:Taichung\n臺南市:Tainan\n高雄市:Kaohsiung\n基隆市:Keelung\n新竹市:Hsinchu\n新竹縣:HsinchuCounty\n苗栗縣:MiaoliCounty\n彰化縣:ChanghuaCounty\n南投縣:NantouCounty\n雲林縣:YunlinCounty\n嘉義縣:ChiayiCounty\n嘉義市:Chiayi\n屏東縣:PingtungCounty\n宜蘭縣:YilanCounty\n花蓮縣:HualienCounty\n臺東縣:TaitungCounty\n金門縣:KinmenCounty\n澎湖縣:PenghuCounty\n連江縣:LienchiangCounty`;\n\nlet places = placeName.split(/\\r?\\n/);\n\nconst stationCounties = \n`臺中市:Taichung\n新竹市:Hsinchu\n苗栗縣:MiaoliCounty\n新北市:NewTaipei\n屏東縣:PingtungCounty\n金門縣:KinmenCounty\n桃園市:Taoyuan\n臺北市:Taipei\n高雄市:Kaohsiung\n臺南市:Tainan\n嘉義市:Chiayi`;\n\nlet stations = stationCounties.split(/\\r?\\n/);\n\nconst roadCountires = \n`臺中市:Taichung\n基隆市:Keelung\n新竹縣:HsinchuCounty\n苗栗縣:MiaoliCounty\n彰化縣:ChanghuaCounty\n新北市:NewTaipei\n南投縣:NantouCounty\n雲林縣:YunlinCounty\n嘉義縣:ChiayiCounty\n嘉義市:Chiayi\n屏東縣:PingtungCounty\n宜蘭縣:YilanCounty\n花蓮縣:HualienCounty\n臺東縣:TaitungCounty\n金門縣:KinmenCounty\n澎湖縣:PenghuCounty\n桃園市:Taoyuan\n臺北市:Taipei\n高雄市:Kaohsiung\n臺南市:Tainan`;\nlet roads = roadCountires.split(/\\r?\\n/);\n\n\nexport const placeList = places.map((i, idx) => i.split(':'));\nexport const bikeStations = stations.map((i, idx) => i.split(':'))\nexport const bikeRoads = roads.map(i => i.split(':'))","import style from './Header.module.css'\nimport { bikeStations, bikeRoads } from '../../data/places';\nimport { useDispatch } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBiking } from '@fortawesome/free-solid-svg-icons';\n\n\nconst Header = (props) => {\n\tconst stationsOptions = bikeStations.map((i, idx) => <option key={idx} value={i[1]}>{i[0]}</option>)\n\tconst roadOptions = bikeRoads.map((i, idx) => <option key={idx} value={i[1]}>{i[0]}</option>)\n\n\tconst dispatch = useDispatch();\n\n\tfunction handleChange(e) {\n\t\t// EventBus.dispatch('rentBike', e.target.value);\n\t\t// dispatch({ \n\t\t// \ttype: 'ADD_ITEM', \n\t\t// \tpayload: {itemNew: e.target.value}\t\n\t\t// });\n\n\t\tdispatch({\n\t\t\ttype: 'PlaceSelect',\n\t\t\tpayload: { place: e.target.value }\n\t\t})\n\t}\n\n\tfunction handleRoadSelect(e) {\n\t\tdispatch({\n\t\t\ttype: 'RoadPlace',\n\t\t\tpayload: {road: e.target.value}\n\t\t})\n\t}\n\n\treturn (\n\t\t<div className={style.container + \" \" +(props.style)}>\n\t\t\t<div className={style.logo}>\n\t\t\t\t<FontAwesomeIcon className={style.icon} icon={faBiking}/>\n\t\t\t\t<p>Go Bike</p>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div className={style.selectContainer}> \n\t\t\t\t<div className={style.items}>\n\t\t\t\t\t<p>租車還車站點：</p> \n\t\t\t\t\t<select onChange={handleChange}>\n\t\t\t\t\t\t<option disabled selected value>請選擇站點</option>\n\t\t\t\t\t\t{stationsOptions}\n\t\t\t\t\t</select> \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div className={style.items}>\n\t\t\t\t\t<p>自行車道：</p>\n\t\t\t\t\t<select onChange={handleRoadSelect}>\n\t\t\t\t\t\t<option disabled selected value>請選擇車道</option>\n\t\t\t\t\t\t{roadOptions}\n\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div> \n\n\t\t\t</div>\n\n\t\t</div>\n\t)\n}\n\nexport default Header;","import { Fragment } from \"react\";\nimport style from './Road.module.css'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMapMarkerAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { useDispatch } from \"react-redux\";\n\nconst Road = ({data}) => {\n\tconst dispatch = useDispatch();\n\tfunction handleRoadClick() {\n\t\tdispatch({\n\t\t\ttype: 'RoadSelect',\n\t\t\tpayload: { roadSelect: data }\n\t\t})\n\t}\n\n\treturn (\n\t\t<div className={style.container} onClick={handleRoadClick}>\n\t\t\t<p className={style.header}>{data.RouteName}</p>\n\n\t\t\t<Fragment>\n\t\t\t\t{data.Direction ? <p>方向：{data.Direction}</p> : null}\n\t\t\t</Fragment>\n\t\t\t{/* <p>方向：{data.Direction ? data.Direction: '未知'}</p> */}\n\n\t\t\t<div className={style.station}>\n\t\t\t\t<p>起</p>\n\t\t\t\t<p>{data.RoadSectionStart}</p>\n\t\t\t</div>\n\n\t\t\t<div className={style.station}>\n\t\t\t\t<p>迄</p>\n\t\t\t\t<p>{data.RoadSectionEnd}</p>\n\t\t\t</div>\n\n\n\t\t\t<div className={style.location}>\n\t\t\t\t<p>總長：{data.CyclingLength/1000}KM</p>\n\n\t\t\t\t<div>\n\t\t\t\t\t<FontAwesomeIcon icon={faMapMarkerAlt}/>\n\t\t\t\t\t<p>{data.City} {data.Town}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n};\n\nexport default Road;","import style from './RoadList.module.css'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBars } from '@fortawesome/free-solid-svg-icons';\nimport { useEffect, useState } from 'react';\nimport Road from '../Road/Road';\nimport getData from '../../api/dataFetch';\nimport { useSelector } from 'react-redux';\n\nfunction RoadList({props}) {\n\tconst [isOpen, setIsOpen] = useState(false)\n\tconst [display, setDisplay] = useState(style.container_close)\n\tconst [roadList, setRoadList] = useState([])\n\tconst placeData = useSelector(state => state.road)\n\n\tfunction menuOpen() {\n\t\tif (isOpen) {\n\t\t\tsetDisplay(style.container_close)\n\t\t\tsetIsOpen(false)\n\t\t} else {\n\t\t\tsetDisplay(style.container_open)\n\t\t\tsetIsOpen(true)\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tgetData(`/v2/Cycling/Shape/${placeData}?format=JSON`)\n\t\t.then(res => {\n\t\t\tconst data = res.map((i, idx) => <Road key={idx} data={i}/>)\n\t\t\tsetRoadList(data)\n\t\t})\n\t}, [placeData])\n\n\treturn (\n\t\t<div className={style.container + ' ' + (display)}>\n\t\t\t<div className={style.wrapper}>\n\t\t\t\t<button className={style.menu} onClick={menuOpen}>\n\t\t\t\t\t<FontAwesomeIcon icon={faBars}/>\n\t\t\t\t</button> \n\n\t\t\t\t<div className={style.menu_list}>\n\t\t\t\t\t<div className={style.roadContainer}>\n\t\t\t\t\t\t{roadList}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default RoadList","import { useState, useEffect } from 'react';\nimport getData from './api/dataFetch';\nimport style from './App.module.css';\nimport Map from './components/Map/Map';\nimport Maps from './components/Maps/Maps';\nimport MapRoute from './components/MapRoute/MapRoute';\n\nimport Header from './components/Header/Header'\nimport { useSelector } from 'react-redux';\nimport RoadList from './components/RoadList/RoadList';\n\nfunction App() {\n  const [bikeStations, setBikeStations] = useState([])\n  const [bikeAvailable, setBikeAvailable] = useState([])\n\tconst placeData = useSelector(state => state.place)\n  const routeData = useSelector(state => state.roadSelect);\n  const stationOrRoad = useSelector(state => state.stationOrRoad)\n  const [stationDisplay, setStationDisplay] = useState(null)\n  const [roadDisplay, setRoadDisplay] = useState(null)\n  const [routeDatas, setRouteDatas] = useState(null);\n  \n\n  useEffect(() => {\n    if (stationOrRoad === 'station') {\n      setStationDisplay(style.station_dispaly) \n      setRoadDisplay(style.road_not_display)\n      let stationData = null; \n      let bikeAvailableData = null;\n\n    async function fetchData() {\n      await getData(`/v2/Bike/Station/${placeData}?$format=JSON`)\n      .then(res => {\n        stationData = res;\n      })\n\n      await getData(`v2/Bike/Availability/${placeData}?$format=JSON`)\n      .then(res =>{\n        bikeAvailableData = res\n      })\n\n      if (stationData && stationData.length === bikeAvailableData.length) {\n        setBikeAvailable(bikeAvailableData)\n        setBikeStations(stationData)\n      }\n      else {\n        // alert('Not compare')\n      }\n    }\n\n    fetchData()\n    } else {\n      setStationDisplay(style.station_not_display) \n      setRoadDisplay(style.road_display)\n      setRouteDatas(routeData)\n    }\n\n  }, [placeData, routeData]);\n\n  return (\n    <div className={style.container}>\n      <Header style={style.header}></Header> \n      {/* <div className={style.map + ' ' + stationOrRoad === 'station' ? style.station_display: ''}>  */}\n      {/* <div className={style.map + ' ' + (stationDisplay)}>\n        <Map bikeAvailable={bikeAvailable} bikeStations={bikeStations}/>\n      </div> */}\n\n      {/* <div className={style.map + \" \" + (roadDisplay) }>\n\n\n        <MapRoute route={routeData}/>\n\n</div> */} \n      <Maps bikeAvailable={bikeAvailable} bikeStations={bikeStations} select={routeDatas}/>\n      <RoadList/>\n    </div>\n  );\n}\n\nexport default App;\n","const initState = {\n\t// menuItemData: [\n\t// \t\"Like的發問\",\n\t// \t\"Like的回答\",\n\t// \t\"Like的文章\",\n\t// \t\"Like的留言\"\n\t// ],\n\tplace: 'NewTaipei',\n\troad: 'NewTaipei',\n\troadSelect: null,\n\tstationOrRoad: 'station'\n};\n\nconst itemReducer = (state = initState, action) => {\n\tswitch(action.type) {\n\t\tcase 'PlaceSelect': {\n\t\t\tconst data = Object.assign({}, state);\n\t\t\tdata.place = action.payload.place\n\t\t\tdata.stationOrRoad = 'station';\n\t\t\treturn data;\n\t\t}\n\n\t\tcase 'RoadPlace': {\n\t\t\tconst data = Object.assign({}, state);\n\t\t\t// const data = state;\n\t\t\tdata.road = action.payload.road\n\t\t\tdata.stationOrRoad = 'road';\n\t\t\treturn data;\n\t\t}\n\n\t\tcase 'RoadSelect': {\n\t\t\tconst data = Object.assign({}, state);\n\t\t\tdata.roadSelect = action.payload.roadSelect\n\t\t\tdata.stationOrRoad = 'road';\n\t\t\treturn data;\n\t\t}\n\n\t\t case 'ADD_ITEM': {\n\t\t \tconst menuItemCopy = state.menuItemData.slice();\n\t\t \treturn {\n\t\t \t\tmenuItemData: [action.payload.itemNew].concat(menuItemCopy)\n\t\t \t};\n    }\n\n\t\tcase 'CLEAN_ITEM': {\n\t\t\treturn { menuItemData: [] };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport { itemReducer };","import { createStore } from 'redux';\nimport { itemReducer } from './reducer';\n\nconst itemStore = createStore(itemReducer);\n\nexport { itemStore };\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport { itemStore as store } from './model/store.js'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__1MQN3\",\"header\":\"App_header__3ZZ1n\",\"map\":\"App_map__3Febj\",\"station_dispaly\":\"App_station_dispaly__3mN6X\",\"station_not_display\":\"App_station_not_display__7uWut\",\"road_display\":\"App_road_display__BE9Ql\",\"road_not_display\":\"App_road_not_display__u4QZm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Header_container__1VC87\",\"logo\":\"Header_logo__3_SJs\",\"icon\":\"Header_icon__2vvCF\",\"selectContainer\":\"Header_selectContainer__Irzeo\",\"items\":\"Header_items__2Dz-W\"};"],"sourceRoot":""}