{"version":3,"sources":["components/Road/Road.module.css","components/Map/Map.module.css","components/MapRoute/MapRoute.module.css","App.module.css","api/dataFetch.js","components/Map/Map.js","components/MapRoute/MapRoute.js","data/places.js","components/Header/Header.js","components/Road/Road.js","components/RoadList/RoadList.js","App.js","model/reducer.js","model/store.js","index.js","components/RoadList/RoadList.module.css","components/Header/Header.module.css"],"names":["module","exports","getAuthorizationHeader","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","Authorization","getHMAC","query","a","console","log","axios","defaults","baseURL","headers","get","res","status","data","getData","Map","props","available","bikeAvailable","stations","bikeStations","mapContainer","useRef","useEffect","length","map","L","current","center","StationPosition","PositionLat","PositionLon","zoom","tileLayer","attribution","addTo","greenIcon","Icon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","markers","markerClusterGroup","item","idx","marker","icon","bindPopup","StationName","Zh_tw","StationAddress","AvailableRentBikes","AvailableReturnBikes","forEach","addLayer","remove","className","style","container","ref","el","MapRoute","route","mapContainers","alert","path","Geometry","replace","trim","split","i","arr","push","Number","openPopup","latlngs","polyline","color","fitBounds","getBounds","places","roads","bikeRoads","Header","stationsOptions","value","roadOptions","dispatch","useDispatch","logo","faBiking","selectContainer","items","onChange","e","type","payload","place","target","disabled","selected","road","Road","onClick","roadSelect","header","RouteName","Direction","station","RoadSectionStart","RoadSectionEnd","location","CyclingLength","faMapMarkerAlt","City","Town","RoadList","useState","isOpen","setIsOpen","container_close","display","setDisplay","roadList","setRoadList","placeData","useSelector","state","then","wrapper","menu","container_open","faBars","menu_list","roadContainer","App","setBikeStations","setBikeAvailable","routeData","stationOrRoad","stationDisplay","setStationDisplay","roadDisplay","setRoadDisplay","station_dispaly","road_not_display","stationData","bikeAvailableData","fetchData","station_not_display","road_display","initState","itemStore","createStore","action","Object","assign","menuItemCopy","menuItemData","slice","itemNew","concat","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.8d8722c6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Road_container__1CbJq\",\"header\":\"Road_header__c1kgL\",\"station\":\"Road_station__16GtC\",\"location\":\"Road_location__3MEFE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Map_container__3xh_q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MapRoute_container__3Bsze\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__1MQN3\",\"header\":\"App_header__3ZZ1n\",\"map\":\"App_map__3Febj\",\"station_dispaly\":\"App_station_dispaly__3mN6X\",\"station_not_display\":\"App_station_not_display__7uWut\",\"road_display\":\"App_road_display__BE9Ql\",\"road_not_display\":\"App_road_not_display__u4QZm\"};","import axios from 'axios'\nimport jsSHA from 'jssha'\n\nfunction getAuthorizationHeader() {\n  //  填入自己 ID、KEY 開始\n  let AppID = \"83fc39f9c29946578ee26c17b458f970\";\n  let AppKey = \"0o53fh7JHKpoZBW2kIM8SM7GW4Y\";\n  //  填入自己 ID、KEY 結束\n  let GMTString = new Date().toGMTString();\n  let ShaObj = new jsSHA(\"SHA-1\", \"TEXT\");\n  ShaObj.setHMACKey(AppKey, \"TEXT\");\n  ShaObj.update(\"x-date: \" + GMTString);\n  let HMAC = ShaObj.getHMAC(\"B64\");\n  let Authorization =\n    'hmac username=\"' +\n    AppID +\n    '\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"' +\n    HMAC +\n    '\"';\n  return { Authorization: Authorization, \"X-Date\": GMTString };\n}\n\nasync function getData(query) {\n\ttry {\n    console.log('hi', query)\n\t\taxios.defaults.baseURL = 'https://ptx.transportdata.tw/MOTC'\n\t\taxios.defaults.headers = getAuthorizationHeader();\n\t\tlet res = await axios.get(query) \n\t\tif (res.status === 200) {\n\t\t\treturn res.data\n\t\t}\n\t}\n\tcatch (err) {\n\t\tconsole.log(err);\n\t}\n\n\treturn null;\n}\n\nexport default getData;","import \"leaflet/dist/leaflet.css\"\nimport L from \"leaflet\"\nimport { useEffect, useRef } from 'react'\nimport style from './Map.module.css'\n// 引入 leaflet.markercluster\nimport \"leaflet.markercluster/dist/MarkerCluster.css\"\nimport \"leaflet.markercluster/dist/MarkerCluster.Default.css\"\nimport \"leaflet.markercluster\";\n\n\nfunction Map(props) {\n\tconst available = props.bikeAvailable\n\tconst stations = props.bikeStations;\n\tconst mapContainer = useRef();\n\n\n\tuseEffect(() => {\n\t\tif (stations === null || stations.length === 0) return null;\n\t\tconst map = L.map(mapContainer.current, {\n\t\t\tcenter: [stations[0].StationPosition.PositionLat, stations[0].StationPosition.PositionLon], \n\t\t\tzoom: 16 \n\t\t}); \n\t\t\n\t\tconst osmUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"; \n\t\tL.tileLayer(osmUrl, { \n\t\t\tattribution: \n\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors', \n\t\t}).addTo(map); \n\t\t\n\t\tvar greenIcon = new L.Icon({ \n\t\t\ticonUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n\t\t\tshadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n\t\t\ticonSize: [25, 41], \n\t\t\ticonAnchor: [12, 41],\n\t\t\tpopupAnchor: [1, -34],\n\t\t\tshadowSize: [41, 41] \n\t\t}); \n\t\t\n\t\tvar markers = L.markerClusterGroup();\n\n\t\tstations.map((item, idx) => L.marker([item.StationPosition.PositionLat, item.StationPosition.PositionLon], {icon: greenIcon})\n\t\t.bindPopup(\n\t\t\t`<div> \n\t\t\t<h1>${item.StationName.Zh_tw}</h1>\n\t\t\t<p>${item.StationAddress.Zh_tw}</p>\n\t\t\t<p>可租借數量${available[idx].AvailableRentBikes}</p>\n\t\t\t<p>可歸還數量${available[idx].AvailableReturnBikes }</p>\n\t\t\t</div>\n\t\t\t`\n\t\t\t))\n\t\t.forEach(item => markers.addLayer(item))\n\n\t\tmap.addLayer(markers)\n\n\t\t           \n\n\n\n\t\t// unmount map function \n\t\treturn ()=> map.remove(); \n\t}, [stations]);\n\n\treturn (\n\t\t <div className={style.container} \n\t\t ref={el => mapContainer.current = el}> \n\t\t </div>\n\t)\n}\n// \tif (Object.keys(props.data).length !== 0) { \n// \t\tconsole.log('in')\n// \t\tlet map = L.map('map', { \n// \t\t\tcenter: [data[0].StationPosition.PositionLat, data[0].StationPosition.PositionLon], \n// \t\t\tzoom: 16 \n// \t\t});\n\n// \tconst osmUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"; \n// \tL.tileLayer(osmUrl, { \n// \t\tattribution: \n// \t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors', \n// \t}).addTo(map);\n\n// \tvar greenIcon = new L.Icon({\n//   iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n//   shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n//   iconSize: [25, 41],\n//   iconAnchor: [12, 41],\n//   popupAnchor: [1, -34],\n//   shadowSize: [41, 41]\n// });\n\n// \tdata.forEach(item => {\n// \t\tL.marker([item.StationPosition.PositionLat, item.StationPosition.PositionLon], {icon: greenIcon}).addTo(map)\n// \t\t.bindPopup(`<h1>${item.StationPosition.Zh_tw}</h1>`)\n// \t})\n// }\n// useEffect(() => { \n\t// \tlet map = L.map('map', {\n\t// \t\tcenter: [pos, lon],\n\t// \t\tzoom: 16,\n\t// \t});\n\n\t// \tconst osmUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\n\t// \t L.tileLayer(osmUrl, {\n  //       attribution:\n  //         '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  //     }).addTo(map);\n\n\t// \t\tL.marker([pos, lon], {\n\t// \t\t\ticon: L.icon({\n\t// \t\t\t\t iconUrl: \"/location.png\", \n\t// \t\t\t\t iconSize: [30, 30],\n\t// \t\t\t}),\n\t// \t\t}).addTo(map);\n\n\t// \treturn () => {map.remove()}\n\t// }, [pos, lon])\n\n\nexport default Map;","import \"leaflet/dist/leaflet.css\"\nimport L from 'leaflet'\nimport style from './MapRoute.module.css'\nimport { useEffect, useRef } from \"react\"\nimport getData from \"../../api/dataFetch\"\n\nconst MapRoute = ({ route }) => {\n\tconst mapContainers = useRef()\n\n\tuseEffect(() => {\n\t\tif (route === null) return null;\n\t\talert('in')\n\t\tconst routes = route.Geometry.replace(\"MULTILINESTRING \", '').replace('((', '').replace('))', '').trim();\n\n\t\tconst path = routes.split(',').map(i => \n\t\t\t{\n\t\t\t\tlet data = i.split(' ')\n\t\t\t\tlet arr = []\n\t\t\t\tarr.push(Number(data[1]))\n\t\t\t\tarr.push(Number(data[0]))\n\t\t\t\treturn arr;\n\t\t\t})\n\t\tconst map = L.map(mapContainers.current, {\n\t\t\tcenter: [path[0][0], path[0][1]],\n\t\t\tzoom: 16\n\t\t});\n\n\t\tconst osmUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\n\n\t\tL.tileLayer(osmUrl, {\n\t\t\tattribution:\n\t\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\t\t}).addTo(map);\n\n\t\tvar greenIcon = new L.Icon({\n\t\t\ticonUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n\t\t\tshadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n\t\t\ticonSize: [25, 41],\n\t\t\ticonAnchor: [12, 41],\n\t\t\tpopupAnchor: [1, -34],\n\t\t\tshadowSize: [41, 41]\n\t\t});\n\n\t\tL.marker([path[0][0], path[0][1]], {icon: greenIcon}).addTo(map)\n    .bindPopup('<h1>Start</h1>')\n    .openPopup();\n\n\t\tL.marker([path[path.length -1][0], path[path.length - 1][1]], {icon:greenIcon}).addTo(map)\n    .bindPopup('<h1>End</h1>')\n    .openPopup();\n\n\t\t//From documentation http://leafletjs.com/reference.html#polyline \n\t\t// create a red polyline from an arrays of LatLng points \n\t\tvar latlngs = path;\n\t\tvar polyline = L.polyline(latlngs, {\n\t\t\tcolor: 'red'\n\t\t}).addTo(map);\n\n\t\t// // zoom the map to the polyline \n\t\t map.fitBounds(polyline.getBounds());\n\n\t\treturn () => map.remove()\n\t}, [route])\n\n\treturn (\n\t\t<div className={style.container}\n\t\t\tref={el => mapContainers.current = el}>\n\n\t\t</div>\n\t)\n}\n\nexport default MapRoute;","const placeName = `臺北市:Taipei\n新北市:NewTaipei\n桃園市:Taoyuan\n臺中市:Taichung\n臺南市:Tainan\n高雄市:Kaohsiung\n基隆市:Keelung\n新竹市:Hsinchu\n新竹縣:HsinchuCounty\n苗栗縣:MiaoliCounty\n彰化縣:ChanghuaCounty\n南投縣:NantouCounty\n雲林縣:YunlinCounty\n嘉義縣:ChiayiCounty\n嘉義市:Chiayi\n屏東縣:PingtungCounty\n宜蘭縣:YilanCounty\n花蓮縣:HualienCounty\n臺東縣:TaitungCounty\n金門縣:KinmenCounty\n澎湖縣:PenghuCounty\n連江縣:LienchiangCounty`;\n\nlet places = placeName.split(/\\r?\\n/);\n\nconst stationCounties = \n`臺中市:Taichung\n新竹市:Hsinchu\n苗栗縣:MiaoliCounty\n新北市:NewTaipei\n屏東縣:PingtungCounty\n金門縣:KinmenCounty\n桃園市:Taoyuan\n臺北市:Taipei\n高雄市:Kaohsiung\n臺南市:Tainan\n嘉義市:Chiayi`;\n\nlet stations = stationCounties.split(/\\r?\\n/);\n\nconst roadCountires = \n`臺中市:Taichung\n基隆市:Keelung\n新竹縣:HsinchuCounty\n苗栗縣:MiaoliCounty\n彰化縣:ChanghuaCounty\n新北市:NewTaipei\n南投縣:NantouCounty\n雲林縣:YunlinCounty\n嘉義縣:ChiayiCounty\n嘉義市:Chiayi\n屏東縣:PingtungCounty\n宜蘭縣:YilanCounty\n花蓮縣:HualienCounty\n臺東縣:TaitungCounty\n金門縣:KinmenCounty\n澎湖縣:PenghuCounty\n桃園市:Taoyuan\n臺北市:Taipei\n高雄市:Kaohsiung\n臺南市:Tainan`;\nlet roads = roadCountires.split(/\\r?\\n/);\n\n\nexport const placeList = places.map((i, idx) => i.split(':'));\nexport const bikeStations = stations.map((i, idx) => i.split(':'))\nexport const bikeRoads = roads.map(i => i.split(':'))","import style from './Header.module.css'\nimport { bikeStations, bikeRoads } from '../../data/places';\nimport { useDispatch } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBiking } from '@fortawesome/free-solid-svg-icons';\n\n\nconst Header = (props) => {\n\tconst stationsOptions = bikeStations.map((i, idx) => <option key={idx} value={i[1]}>{i[0]}</option>)\n\tconst roadOptions = bikeRoads.map((i, idx) => <option key={idx} value={i[1]}>{i[0]}</option>)\n\n\tconst dispatch = useDispatch();\n\n\tfunction handleChange(e) {\n\t\t// EventBus.dispatch('rentBike', e.target.value);\n\t\t// dispatch({ \n\t\t// \ttype: 'ADD_ITEM', \n\t\t// \tpayload: {itemNew: e.target.value}\t\n\t\t// });\n\n\t\tdispatch({\n\t\t\ttype: 'PlaceSelect',\n\t\t\tpayload: { place: e.target.value }\n\t\t})\n\t}\n\n\tfunction handleRoadSelect(e) {\n\t\tdispatch({\n\t\t\ttype: 'RoadPlace',\n\t\t\tpayload: {road: e.target.value}\n\t\t})\n\t}\n\n\treturn (\n\t\t<div className={style.container + \" \" +(props.style)}>\n\t\t\t<div className={style.logo}>\n\t\t\t\t<FontAwesomeIcon className={style.icon} icon={faBiking}/>\n\t\t\t\t<p>Go Bike</p>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div className={style.selectContainer}> \n\t\t\t\t<div className={style.items}>\n\t\t\t\t\t<p>租車還車站點：</p> \n\t\t\t\t\t<select onChange={handleChange}>\n\t\t\t\t\t\t<option disabled selected value>請選擇站點</option>\n\t\t\t\t\t\t{stationsOptions}\n\t\t\t\t\t</select> \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div className={style.items}>\n\t\t\t\t\t<p>自行車道：</p>\n\t\t\t\t\t<select onChange={handleRoadSelect}>\n\t\t\t\t\t\t<option disabled selected value>請選擇車道</option>\n\t\t\t\t\t\t{roadOptions}\n\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div> \n\n\t\t\t</div>\n\n\t\t</div>\n\t)\n}\n\nexport default Header;","import { Fragment } from \"react\";\nimport style from './Road.module.css'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMapMarkerAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { useDispatch } from \"react-redux\";\n\nconst Road = ({data}) => {\n\tconst dispatch = useDispatch();\n\tfunction handleRoadClick() {\n\t\tdispatch({\n\t\t\ttype: 'RoadSelect',\n\t\t\tpayload: { roadSelect: data }\n\t\t})\n\t}\n\n\treturn (\n\t\t<div className={style.container} onClick={handleRoadClick}>\n\t\t\t<p className={style.header}>{data.RouteName}</p>\n\n\t\t\t<Fragment>\n\t\t\t\t{data.Direction ? <p>方向：{data.Direction}</p> : null}\n\t\t\t</Fragment>\n\t\t\t{/* <p>方向：{data.Direction ? data.Direction: '未知'}</p> */}\n\n\t\t\t<div className={style.station}>\n\t\t\t\t<p>起</p>\n\t\t\t\t<p>{data.RoadSectionStart}</p>\n\t\t\t</div>\n\n\t\t\t<div className={style.station}>\n\t\t\t\t<p>迄</p>\n\t\t\t\t<p>{data.RoadSectionEnd}</p>\n\t\t\t</div>\n\n\n\t\t\t<div className={style.location}>\n\t\t\t\t<p>總長：{data.CyclingLength/1000}KM</p>\n\n\t\t\t\t<div>\n\t\t\t\t\t<FontAwesomeIcon icon={faMapMarkerAlt}/>\n\t\t\t\t\t<p>{data.City} {data.Town}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n};\n\nexport default Road;","import style from './RoadList.module.css'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBars } from '@fortawesome/free-solid-svg-icons';\nimport { useEffect, useState } from 'react';\nimport Road from '../Road/Road';\nimport getData from '../../api/dataFetch';\nimport { useSelector } from 'react-redux';\n\nfunction RoadList({props}) {\n\tconst [isOpen, setIsOpen] = useState(false)\n\tconst [display, setDisplay] = useState(style.container_close)\n\tconst [roadList, setRoadList] = useState([])\n\tconst placeData = useSelector(state => state.road)\n\tconsole.log(placeData, 'adsfafd')\n\n\tfunction menuOpen() {\n\t\tif (isOpen) {\n\t\t\tsetDisplay(style.container_close)\n\t\t\tsetIsOpen(false)\n\t\t} else {\n\t\t\tsetDisplay(style.container_open)\n\t\t\tsetIsOpen(true)\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tgetData(`/v2/Cycling/Shape/${placeData}?format=JSON`)\n\t\t.then(res => {\n\t\t\tconst data = res.map((i, idx) => <Road key={idx} data={i}/>)\n\t\t\tsetRoadList(data)\n\t\t})\n\t}, [placeData])\n\n\treturn (\n\t\t<div className={style.container + ' ' + (display)}>\n\t\t\t<div className={style.wrapper}>\n\t\t\t\t<button className={style.menu} onClick={menuOpen}>\n\t\t\t\t\t<FontAwesomeIcon icon={faBars}/>\n\t\t\t\t</button> \n\n\t\t\t\t<div className={style.menu_list}>\n\t\t\t\t\t<div className={style.roadContainer}>\n\t\t\t\t\t\t{roadList}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default RoadList","import { useState, useEffect } from 'react';\nimport getData from './api/dataFetch';\nimport style from './App.module.css';\nimport Map from './components/Map/Map';\nimport MapRoute from './components/MapRoute/MapRoute';\nimport Header from './components/Header/Header'\nimport { useSelector } from 'react-redux';\nimport RoadList from './components/RoadList/RoadList';\n\nfunction App() {\n  const [bikeStations, setBikeStations] = useState([])\n  const [bikeAvailable, setBikeAvailable] = useState([])\n\tconst placeData = useSelector(state => state.place)\n  const routeData = useSelector(state => state.roadSelect);\n  const stationOrRoad = useSelector(state => state.stationOrRoad)\n  const [stationDisplay, setStationDisplay] = useState(null)\n  const [roadDisplay, setRoadDisplay] = useState(null)\n  // console.log(stationOrRoad)\n\n  useEffect(() => {\n    if (stationOrRoad === 'station') {\n      setStationDisplay(style.station_dispaly) \n      setRoadDisplay(style.road_not_display)\n      let stationData = null;\n    let bikeAvailableData = null;\n\n    async function fetchData() {\n      await getData(`/v2/Bike/Station/${placeData}?$format=JSON`)\n      .then(res => {\n        stationData = res;\n      })\n\n      await getData(`v2/Bike/Availability/${placeData}?$format=JSON`)\n      .then(res =>{\n        bikeAvailableData = res\n      })\n\n      if (stationData && stationData.length === bikeAvailableData.length) {\n        setBikeAvailable(bikeAvailableData)\n        setBikeStations(stationData)\n      }\n      else {\n        // alert('Not compare')\n      }\n    }\n\n    fetchData()\n    } else {\n      setStationDisplay(style.station_not_display) \n      setRoadDisplay(style.road_display)\n    }\n\n  }, [placeData, routeData]);\n\n  return (\n    <div className={style.container}>\n      <Header style={style.header}></Header> \n      {/* <div className={style.map + ' ' + stationOrRoad === 'station' ? style.station_display: ''}>  */}\n      <div className={style.map + ' ' + (stationDisplay)}>\n        <Map bikeAvailable={bikeAvailable} bikeStations={bikeStations}/>\n      </div>\n\n      <div className={style.map + \" \" + (roadDisplay) }>\n\n{/* <div className={style.map}> */}\n\n        <MapRoute route={routeData}/>\n\n</div>\n      {/* </div> */}\n      <RoadList/>\n    </div>\n  );\n}\n\nexport default App;\n","const initState = {\n\t// menuItemData: [\n\t// \t\"Like的發問\",\n\t// \t\"Like的回答\",\n\t// \t\"Like的文章\",\n\t// \t\"Like的留言\"\n\t// ],\n\tplace: 'NewTaipei',\n\troad: 'NewTaipei',\n\troadSelect: null,\n\tstationOrRoad: 'station'\n};\n\nconst itemReducer = (state = initState, action) => {\n\tswitch(action.type) {\n\t\tcase 'PlaceSelect': {\n\t\t\tconst data = Object.assign({}, state);\n\t\t\tdata.place = action.payload.place\n\t\t\tdata.stationOrRoad = 'station';\n\t\t\treturn data;\n\t\t}\n\n\t\tcase 'RoadPlace': {\n\t\t\tconst data = Object.assign({}, state);\n\t\t\t// const data = state;\n\t\t\tdata.road = action.payload.road\n\t\t\tdata.stationOrRoad = 'road';\n\t\t\treturn data;\n\t\t}\n\n\t\tcase 'RoadSelect': {\n\t\t\tconst data = Object.assign({}, state);\n\t\t\tdata.roadSelect = action.payload.roadSelect\n\t\t\tdata.stationOrRoad = 'road';\n\t\t\treturn data;\n\t\t}\n\n\t\t case 'ADD_ITEM': {\n\t\t \tconst menuItemCopy = state.menuItemData.slice();\n\t\t \treturn {\n\t\t \t\tmenuItemData: [action.payload.itemNew].concat(menuItemCopy)\n\t\t \t};\n    }\n\n\t\tcase 'CLEAN_ITEM': {\n\t\t\treturn { menuItemData: [] };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport { itemReducer };","import { createStore } from 'redux';\nimport { itemReducer } from './reducer';\n\nconst itemStore = createStore(itemReducer);\n\nexport { itemStore };\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport { itemStore as store } from './model/store.js'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RoadList_container__e5diS\",\"close\":\"RoadList_close__wnnqw\",\"container_open\":\"RoadList_container_open__3IAAI\",\"container_close\":\"RoadList_container_close__2aQ4t\",\"wrapper\":\"RoadList_wrapper__2yFXH\",\"menu\":\"RoadList_menu__3_fJT\",\"menu_list\":\"RoadList_menu_list__2Gm_s\",\"roadContainer\":\"RoadList_roadContainer__2rnqt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Header_container__1VC87\",\"logo\":\"Header_logo__3_SJs\",\"icon\":\"Header_icon__2vvCF\",\"selectContainer\":\"Header_selectContainer__Irzeo\",\"items\":\"Header_items__2Dz-W\"};"],"sourceRoot":""}